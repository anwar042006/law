<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” Blockchain Evidence Tracking System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
        }
        .police-bg {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        .public-bg {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }
        .court-bg {
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .btn-primary {
            transition: all 0.2s ease;
        }
        .btn-primary:hover {
            transform: translateY(-1px);
        }
        .form-input {
            transition: all 0.2s ease;
        }
        .form-input:focus {
            transform: translateY(-1px);
        }
        .hidden {
            display: none !important;
        }
        .search-result {
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .search-result:hover {
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <!-- Home Page -->
    <div id="homePage" class="min-h-screen">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-12">
                <div class="flex items-center justify-center mb-4">
                    <i data-lucide="shield" class="w-16 h-16 text-blue-600 mr-4"></i>
                    <h1 class="text-4xl font-bold text-gray-900">ğŸ” Evidence Tracking System</h1>
                </div>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    Secure blockchain-based evidence management for law enforcement and judicial processes
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Police Portal -->
                <div class="bg-white rounded-xl shadow-lg p-8 card-hover">
                    <div class="text-center">
                        <i data-lucide="shield" class="w-16 h-16 text-blue-600 mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ‘®â€â™‚ï¸ Police Portal</h2>
                        <p class="text-gray-600 mb-6">Register and manage evidence cases with secure blockchain storage.</p>
                        <button onclick="showPoliceLogin()" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold btn-primary hover:bg-blue-700">
                            Access Portal
                        </button>
                    </div>
                </div>

                <!-- Public Portal -->
                <div class="bg-white rounded-xl shadow-lg p-8 card-hover">
                    <div class="text-center">
                        <i data-lucide="eye" class="w-16 h-16 text-green-600 mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ‘¥ Public Portal</h2>
                        <p class="text-gray-600 mb-6">Track case status using Evidence ID, Aadhaar, or Accused name.</p>
                        <button onclick="showPublicPortal()" class="w-full bg-green-600 text-white py-3 px-6 rounded-lg font-semibold btn-primary hover:bg-green-700">
                            Track Cases
                        </button>
                    </div>
                </div>

                <!-- Court Portal -->
                <div class="bg-white rounded-xl shadow-lg p-8 card-hover">
                    <div class="text-center">
                        <i data-lucide="gavel" class="w-16 h-16 text-orange-600 mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">âš–ï¸ Court Portal</h2>
                        <p class="text-gray-600 mb-6">Review cases and submit judicial decisions with blockchain verification.</p>
                        <button onclick="showCourtLogin()" class="w-full bg-orange-600 text-white py-3 px-6 rounded-lg font-semibold btn-primary hover:bg-orange-700">
                            Access Portal
                        </button>
                    </div>
                </div>
            </div>

            <div class="text-center mt-12">
                <div class="inline-flex items-center bg-white rounded-lg px-6 py-3 shadow-md">
                    <i data-lucide="hash" class="w-5 h-5 text-blue-600 mr-2"></i>
                    <span class="text-gray-700 font-medium">ğŸ”— Powered by Blockchain Technology</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Police Login Page -->
    <div id="policeLoginPage" class="min-h-screen police-bg hidden">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-xl shadow-lg p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <i data-lucide="shield" class="w-16 h-16 text-blue-600 mx-auto mb-4"></i>
                    <h2 class="text-2xl font-bold text-gray-900">ğŸ‘®â€â™‚ï¸ Police Login</h2>
                    <p class="text-gray-600">Secure access to evidence management</p>
                </div>

                <form id="policeLoginForm" class="space-y-6">
                    <div>
                        <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                            <i data-lucide="user" class="w-4 h-4 mr-2"></i>
                            Username
                        </label>
                        <input type="text" id="policeUsername" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter username" required>
                    </div>

                    <div>
                        <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                            <i data-lucide="lock" class="w-4 h-4 mr-2"></i>
                            Password
                        </label>
                        <input type="password" id="policePassword" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter password" required>
                    </div>

                    <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold btn-primary hover:bg-blue-700">
                        ğŸ” Login
                    </button>
                </form>

                <div class="mt-6 text-center">
                    <button onclick="showHome()" class="text-blue-600 hover:text-blue-700 font-medium">
                        â† Back to Home
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Police Portal -->
    <div id="policePortal" class="min-h-screen police-bg hidden">
        <div class="bg-white shadow-sm border-b">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <div class="flex items-center">
                    <i data-lucide="shield" class="w-8 h-8 text-blue-600 mr-3"></i>
                    <h1 class="text-xl font-bold text-gray-900">ğŸ‘®â€â™‚ï¸ Police Portal</h1>
                </div>
                <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                    ğŸšª Logout
                </button>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8">
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Case Registration Form -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i data-lucide="file-text" class="w-6 h-6 mr-2 text-blue-600"></i>
                        ğŸ“ Register New Case
                    </h2>

                    <form id="policeForm" class="space-y-6">
                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="user-check" class="w-4 h-4 mr-2"></i>
                                ğŸ†” Aadhaar Number (12 digits)
                            </label>
                            <input type="text" id="aadhaar" maxlength="12" pattern="\d{12}" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter 12-digit Aadhaar number" required>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="user" class="w-4 h-4 mr-2"></i>
                                ğŸ‘¤ Accused Name
                            </label>
                            <input type="text" id="accusedName" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter accused person's name" required>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="file-text" class="w-4 h-4 mr-2"></i>
                                ğŸ“‹ Case Details
                            </label>
                            <textarea id="caseDetails" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter detailed case description" required></textarea>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="map-pin" class="w-4 h-4 mr-2"></i>
                                ğŸ“ Crime Location
                            </label>
                            <input type="text" id="crimeLocation" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter crime location" required>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="calendar" class="w-4 h-4 mr-2"></i>
                                ğŸ• Crime Date & Time
                            </label>
                            <input type="datetime-local" id="crimeDateTime" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="clock" class="w-4 h-4 mr-2"></i>
                                ğŸ“… Case Register Date & Time
                            </label>
                            <input type="datetime-local" id="registerDateTime" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="hash" class="w-4 h-4 mr-2"></i>
                                ğŸ·ï¸ Evidence ID
                            </label>
                            <input type="text" id="evidenceId" readonly class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed" placeholder="Auto-generated Evidence ID">
                        </div>

                        <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold btn-primary hover:bg-blue-700 flex items-center justify-center">
                            <i data-lucide="check-circle" class="w-5 h-5 mr-2"></i>
                            ğŸ“ Register Case & Submit to Blockchain
                        </button>
                    </form>
                </div>

                <!-- Case Tracking Section -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i data-lucide="search" class="w-6 h-6 mr-2 text-blue-600"></i>
                        ğŸ” Case Tracking
                    </h2>

                    <div class="mb-4">
                        <input type="text" id="policeSearch" placeholder="ğŸ” Search by Evidence ID, Aadhaar, or Name..." class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div id="policeSearchResults" class="space-y-4 max-h-96 overflow-y-auto">
                        <div class="text-center text-gray-500 py-8">
                            ğŸ“‚ No cases found. Try a different search term.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Public Portal -->
    <div id="publicPortal" class="min-h-screen public-bg hidden">
        <div class="bg-white shadow-sm border-b">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <div class="flex items-center">
                    <i data-lucide="eye" class="w-8 h-8 text-green-600 mr-3"></i>
                    <h1 class="text-xl font-bold text-gray-900">ğŸ‘¥ Public Portal</h1>
                </div>
                <button onclick="showHome()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                    ğŸ  Home
                </button>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8">
            <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">ğŸ” Case Tracking</h2>
                    <p class="text-gray-600">Track your case status using Evidence ID, Aadhaar Number, or Accused Name</p>
                </div>

                <div class="mb-8">
                    <div class="relative">
                        <i data-lucide="search" class="absolute left-4 top-4 w-5 h-5 text-gray-400"></i>
                        <input type="text" id="publicSearch" placeholder="ğŸ” Enter Evidence ID, Aadhaar Number, or Accused Name..." class="w-full pl-12 pr-4 py-4 border border-gray-300 rounded-lg text-lg form-input focus:ring-2 focus:ring-green-500 focus:border-transparent">
                    </div>
                    <button onclick="searchFromBlockchain()" class="mt-4 w-full bg-green-600 text-white py-3 rounded-lg font-semibold btn-primary hover:bg-green-700">
                        ğŸ” Search on Blockchain
                    </button>
                </div>

                <div id="publicSearchResults" class="space-y-6">
                    <div class="text-center text-gray-500 py-12">
                        <i data-lucide="eye" class="w-16 h-16 text-gray-300 mx-auto mb-4"></i>
                        <h3 class="text-xl font-medium mb-2">ğŸ” Enter Search Terms</h3>
                        <p>Enter an Evidence ID, Aadhaar Number, or Accused Name to track case status.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Court Login Page -->
    <div id="courtLoginPage" class="min-h-screen court-bg hidden">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-xl shadow-lg p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <i data-lucide="gavel" class="w-16 h-16 text-orange-600 mx-auto mb-4"></i>
                    <h2 class="text-2xl font-bold text-gray-900">âš–ï¸ Court Login</h2>
                    <p class="text-gray-600">Secure access to judicial decisions</p>
                </div>

                <form id="courtLoginForm" class="space-y-6">
                    <div>
                        <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                            <i data-lucide="user" class="w-4 h-4 mr-2"></i>
                            Username
                        </label>
                        <input type="text" id="courtUsername" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Enter username" required>
                    </div>

                    <div>
                        <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                            <i data-lucide="lock" class="w-4 h-4 mr-2"></i>
                            Password
                        </label>
                        <input type="password" id="courtPassword" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Enter password" required>
                    </div>

                    <button type="submit" class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold btn-primary hover:bg-orange-700">
                        ğŸ” Login
                    </button>
                </form>

                <div class="mt-6 text-center">
                    <button onclick="showHome()" class="text-orange-600 hover:text-orange-700 font-medium">
                        â† Back to Home
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Court Portal -->
    <div id="courtPortal" class="min-h-screen court-bg hidden">
        <div class="bg-white shadow-sm border-b">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <div class="flex items-center">
                    <i data-lucide="gavel" class="w-8 h-8 text-orange-600 mr-3"></i>
                    <h1 class="text-xl font-bold text-gray-900">âš–ï¸ Court Portal</h1>
                </div>
                <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                    ğŸšª Logout
                </button>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8">
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Case Search & Judgment Form -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i data-lucide="scale" class="w-6 h-6 mr-2 text-orange-600"></i>
                        âš–ï¸ Case Judgment
                    </h2>

                    <form id="courtForm" class="space-y-6">
                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="search" class="w-4 h-4 mr-2"></i>
                                ğŸ” Search Case
                            </label>
                            <input type="text" id="courtSearch" placeholder="Search by Evidence ID, Aadhaar, or Name..." class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                            
                            <div id="courtSearchDropdown" class="mt-2 border border-gray-200 rounded-lg max-h-48 overflow-y-auto hidden">
                                <!-- Search results will be populated here -->
                            </div>
                        </div>

                        <div id="selectedCaseInfo" class="bg-gray-50 p-4 rounded-lg hidden">
                            <h3 class="font-bold text-gray-900 mb-2">ğŸ“‹ Selected Case</h3>
                            <div id="selectedCaseDetails" class="text-sm space-y-1">
                                <!-- Selected case details will be populated here -->
                            </div>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="gavel" class="w-4 h-4 mr-2"></i>
                                âš–ï¸ Court Judgment
                            </label>
                            <textarea id="judgment" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Enter court judgment and decision..." required></textarea>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="calendar" class="w-4 h-4 mr-2"></i>
                                ğŸ“… Closing Date
                            </label>
                            <input type="date" id="closingDate" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-orange-500 focus:border-transparent" required>
                        </div>

                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <i data-lucide="file-text" class="w-4 h-4 mr-2"></i>
                                ğŸ”„ Re-judgment (Optional)
                            </label>
                            <textarea id="rejudgment" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Enter re-judgment details if applicable..."></textarea>
                        </div>

                        <button type="submit" id="courtSubmitBtn" disabled class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold btn-primary hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center">
                            <i data-lucide="check-circle" class="w-5 h-5 mr-2"></i>
                            âš–ï¸ Submit Judgment to Blockchain
                        </button>
                    </form>
                </div>

                <!-- Case Tracking Section -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                        <i data-lucide="search" class="w-6 h-6 mr-2 text-orange-600"></i>
                        ğŸ” Case Tracking
                    </h2>

                    <div class="mb-4">
                        <input type="text" id="courtTrackingSearch" placeholder="ğŸ” Search by Evidence ID, Aadhaar, or Name..." class="w-full px-4 py-3 border border-gray-300 rounded-lg form-input focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                    </div>

                    <div id="courtTrackingResults" class="space-y-4 max-h-96 overflow-y-auto">
                        <div class="text-center text-gray-500 py-8">
                            ğŸ“‚ No cases available for review.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==============================
        // BLOCKCHAIN CONFIGURATION
        // ==============================
        
        // ğŸ”§ REPLACE THESE WITH YOUR ACTUAL CONTRACT DETAILS
        const CONTRACT_ADDRESS = "0xB8bbfC476Ce4BCc208aecB5Ac235581dd304fC02"; // Your deployed contract address
        
        // ğŸ”§ REPLACE THIS WITH YOUR ACTUAL CONTRACT ABI
        const CONTRACT = [ [
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "index",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "evidenceId",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "uniqueId",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "aadhar",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "accusedName",
				"type": "string"
			}
		],
		"name": "CaseRegistered",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "uint256",
				"name": "index",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "evidenceId",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "judgment",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "closingDate",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "reJudgment",
				"type": "string"
			}
		],
		"name": "JudgmentSubmitted",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_aadhar",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_accusedName",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_caseDetail",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_crimeLocation",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_crimeDateTime",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_registerDateTime",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_evidenceId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_uniqueId",
				"type": "string"
			}
		],
		"name": "registerCase",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_evidenceId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_judgment",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_closingDate",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_reJudgment",
				"type": "string"
			}
		],
		"name": "submitJudgment",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "cases",
		"outputs": [
			{
				"internalType": "string",
				"name": "aadhar",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "accusedName",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "caseDetail",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "crimeLocation",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "crimeDateTime",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "registerDateTime",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "evidenceId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "uniqueId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "judgment",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "closingDate",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "reJudgment",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_evidenceId",
				"type": "string"
			}
		],
		"name": "getCaseByEvidence",
		"outputs": [
			{
				"components": [
					{
						"internalType": "string",
						"name": "aadhar",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "accusedName",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "caseDetail",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "crimeLocation",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "crimeDateTime",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "registerDateTime",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "evidenceId",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "uniqueId",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "judgment",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "closingDate",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "reJudgment",
						"type": "string"
					}
				],
				"internalType": "struct EvidenceTracking.CaseData",
				"name": "",
				"type": "tuple"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_aadhar",
				"type": "string"
			}
		],
		"name": "getCasesByAadhar",
		"outputs": [
			{
				"components": [
					{
						"internalType": "string",
						"name": "aadhar",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "accusedName",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "caseDetail",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "crimeLocation",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "crimeDateTime",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "registerDateTime",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "evidenceId",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "uniqueId",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "judgment",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "closingDate",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "reJudgment",
						"type": "string"
					}
				],
				"internalType": "struct EvidenceTracking.CaseData[]",
				"name": "",
				"type": "tuple[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_accusedName",
				"type": "string"
			}
		],
		"name": "getCasesByAccused",
		"outputs": [
			{
				"components": [
					{
						"internalType": "string",
						"name": "aadhar",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "accusedName",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "caseDetail",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "crimeLocation",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "crimeDateTime",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "registerDateTime",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "evidenceId",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "uniqueId",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "judgment",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "closingDate",
						"type": "string"
					},
					{
						"internalType": "string",
						"name": "reJudgment",
						"type": "string"
					}
				],
				"internalType": "struct EvidenceTracking.CaseData[]",
				"name": "",
				"type": "tuple[]"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getTotalCases",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]
        ];

        // Network configuration (change to your target network)
        const TARGET_NETWORK = {
            chainId: '0xBcDe6CA21aa1841744013C4C54ce8cD56A65663f', // Sepolia Testnet
            chainName: 'Sepolia Testnet',
            rpcUrls: ['https://sepolia.infura.io/v3/YOUR-PROJECT-ID'],
            blockExplorerUrls: ['https://sepolia.etherscan.io/']
        };

        // ==============================
        // GLOBAL VARIABLES
        // ==============================
        
        let web3 = null;
        let contract = null;
        let account = null;
        let cases = [];
        let evidenceCounter = 1;
        let selectedCase = null;

        // Login credentials
        const credentials = {
            police: { username: 'police_admin', password: 'police123' },
            court: { username: 'court_admin', password: 'court123' }
        };

        // ==============================
        // BLOCKCHAIN FUNCTIONS
        // ==============================
        
        async function connectWallet() {
            if (typeof window.ethereum === 'undefined') {
                alert('ğŸ¦Š Please install MetaMask to interact with the blockchain.');
                return false;
            }

            try {
                // Request account access
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });

                // Check if connected to correct network
                const chainId = await window.ethereum.request({
                    method: 'eth_chainId'
                });

                if (chainId !== TARGET_NETWORK.chainId) {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: TARGET_NETWORK.chainId }],
                        });
                    } catch (switchError) {
                        if (switchError.code === 4902) {
                            await window.ethereum.request({
                                method: 'wallet_addEthereumChain',
                                params: [TARGET_NETWORK],
                            });
                        } else {
                            throw switchError;
                        }
                    }
                }

                // Initialize Web3
                web3 = new Web3(window.ethereum);
                account = accounts[0];
                
                // Initialize contract
                contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                
                console.log('âœ… Connected to wallet:', account);
                console.log('ğŸ”— Contract Address:', CONTRACT_ADDRESS);
                
                return true;
            } catch (error) {
                console.error('âŒ Error connecting to wallet:', error);
                alert('âŒ Failed to connect to MetaMask. Please try again.');
                return false;
            }
        }

        async function registerCaseOnBlockchain(caseData) {
            try {
                if (!contract || !account) {
                    const connected = await connectWallet();
                    if (!connected) return false;
                }

                const crimeTimestamp = Math.floor(new Date(caseData.crimeDateTime).getTime() / 1000);
                const registerTimestamp = Math.floor(new Date(caseData.registerDateTime).getTime() / 1000);

                console.log('ğŸ“ Registering case on blockchain...', caseData);

                const tx = await contract.methods.registerCase(
                    caseData.evidenceId,
                    caseData.aadhaar,
                    caseData.accusedName,
                    caseData.caseDetails,
                    caseData.crimeLocation,
                    crimeTimestamp,
                    registerTimestamp
                ).send({ from: account });

                console.log('âœ… Transaction successful:', tx.transactionHash);
                alert(`âœ… Case registered successfully on blockchain!\nğŸ”— Transaction Hash: ${tx.transactionHash}`);
                return true;
            } catch (error) {
                console.error('âŒ Error registering case:', error);
                alert('âŒ Failed to register case on blockchain. Please check your connection and try again.');
                return false;
            }
        }

        async function submitJudgmentOnBlockchain(evidenceId, judgment, closingDate, rejudgment = '') {
            try {
                if (!contract || !account) {
                    const connected = await connectWallet();
                    if (!connected) return false;
                }

                const closingTimestamp = Math.floor(new Date(closingDate).getTime() / 1000);

                console.log('âš–ï¸ Submitting judgment on blockchain...');

                const tx = await contract.methods.submitJudgment(
                    evidenceId,
                    judgment,
                    closingTimestamp,
                    rejudgment
                ).send({ from: account });

                console.log('âœ… Judgment transaction successful:', tx.transactionHash);
                alert(`âœ… Court judgment submitted successfully on blockchain!\nğŸ”— Transaction Hash: ${tx.transactionHash}`);
                return true;
            } catch (error) {
                console.error('âŒ Error submitting judgment:', error);
                alert('âŒ Failed to submit judgment on blockchain. Please check your connection and try again.');
                return false;
            }
        }

        async function getCaseFromBlockchain(evidenceId) {
            try {
                if (!contract) {
                    const connected = await connectWallet();
                    if (!connected) return null;
                }

                console.log('ğŸ” Searching case on blockchain:', evidenceId);

                const result = await contract.methods.getCase(evidenceId).call();
                
                if (result.exists) {
                    return {
                        evidenceId: result.evidenceId,
                        aadhaar: result.aadhaar,
                        accusedName: result.accusedName,
                        caseDetails: result.caseDetails,
                        crimeLocation: result.crimeLocation,
                        crimeDateTime: new Date(result.crimeDateTime * 1000).toISOString().slice(0, 16),
                        registerDateTime: new Date(result.registerDateTime * 1000).toISOString().slice(0, 16),
                        judgment: result.judgment,
                        closingDate: result.closingDate > 0 ? new Date(result.closingDate * 1000).toISOString().slice(0, 10) : '',
                        rejudgment: result.rejudgment
                    };
                } else {
                    return null;
                }
            } catch (error) {
                console.error('âŒ Error getting case from blockchain:', error);
                return null;
            }
        }

        // ==============================
        // UI FUNCTIONS
        // ==============================
        
        // Initialize Lucide icons
        lucide.createIcons();

        // Navigation functions
        function showHome() {
            hideAllPages();
            document.getElementById('homePage').classList.remove('hidden');
            clearAllForms();
        }

        function showPoliceLogin() {
            hideAllPages();
            document.getElementById('policeLoginPage').classList.remove('hidden');
        }

        function showPublicPortal() {
            hideAllPages();
            document.getElementById('publicPortal').classList.remove('hidden');
        }

        function showCourtLogin() {
            hideAllPages();
            document.getElementById('courtLoginPage').classList.remove('hidden');
        }

        function hideAllPages() {
            const pages = ['homePage', 'policeLoginPage', 'policePortal', 'publicPortal', 'courtLoginPage', 'courtPortal'];
            pages.forEach(page => {
                document.getElementById(page).classList.add('hidden');
            });
        }

        function logout() {
            clearAllForms();
            showHome();
        }

        function clearAllForms() {
            // Clear police form
            document.getElementById('policeForm').reset();
            document.getElementById('evidenceId').value = '';
            
            // Clear court form
            document.getElementById('courtForm').reset();
            document.getElementById('selectedCaseInfo').classList.add('hidden');
            document.getElementById('courtSearchDropdown').classList.add('hidden');
            document.getElementById('courtSubmitBtn').disabled = true;
            selectedCase = null;
            
            // Clear login forms
            document.getElementById('policeLoginForm').reset();
            document.getElementById('courtLoginForm').reset();
            
            // Clear search fields
            document.getElementById('policeSearch').value = '';
            document.getElementById('publicSearch').value = '';
            document.getElementById('courtTrackingSearch').value = '';
            
            // Clear search results
            updateSearchResults('policeSearchResults', []);
            updateSearchResults('publicSearchResults', []);
            updateSearchResults('courtTrackingResults', []);
        }

        // Generate Evidence ID
        function generateEvidenceId() {
            return `EV${evidenceCounter.toString().padStart(6, '0')}`;
        }

        // Search functionality
        function searchCases(searchTerm) {
            if (!searchTerm.trim()) {
                return [];
            }
            return cases.filter(caseData => 
                caseData.evidenceId.toLowerCase().includes(searchTerm.toLowerCase()) ||
                caseData.aadhaar.includes(searchTerm) ||
                caseData.accusedName.toLowerCase().includes(searchTerm.toLowerCase())
            );
        }

        async function searchFromBlockchain() {
            const searchTerm = document.getElementById('publicSearch').value.trim();
            if (!searchTerm) {
                alert('âŒ Please enter a search term');
                return;
            }

            // Show loading
            document.getElementById('publicSearchResults').innerHTML = `
                <div class="text-center py-12">
                    <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-green-600 mx-auto mb-4"></div>
                    <h3 class="text-xl font-medium mb-2">ğŸ” Searching Blockchain...</h3>
                    <p>Please wait while we search for your case.</p>
                </div>
            `;

            try {
                // Try to get case directly by evidence ID
                const caseData = await getCaseFromBlockchain(searchTerm);
                
                if (caseData) {
                    updateSearchResults('publicSearchResults', [caseData]);
                } else {
                    document.getElementById('publicSearchResults').innerHTML = `
                        <div class="text-center text-red-500 py-12">
                            <i data-lucide="search" class="w-16 h-16 text-red-300 mx-auto mb-4"></i>
                            <h3 class="text-xl font-medium mb-2">âŒ No Case Found</h3>
                            <p>No case found with Evidence ID: <strong>${searchTerm}</strong></p>
                            <p class="mt-2 text-gray-600">Please verify the Evidence ID and try again.</p>
                        </div>
                    `;
                    lucide.createIcons();
                }
            } catch (error) {
                console.error('Search error:', error);
                document.getElementById('publicSearchResults').innerHTML = `
                    <div class="text-center text-red-500 py-12">
                        <i data-lucide="alert-circle" class="w-16 h-16 text-red-300 mx-auto mb-4"></i>
                        <h3 class="text-xl font-medium mb-2">âŒ Search Failed</h3>
                        <p>Unable to search blockchain. Please check your connection and try again.</p>
                    </div>
                `;
                lucide.createIcons();
            }
        }

        function updateSearchResults(containerId, results) {
            const container = document.getElementById(containerId);
            
            if (results.length === 0) {
                if (containerId === 'publicSearchResults') {
                    container.innerHTML = `
                        <div class="text-center text-gray-500 py-12">
                            <i data-lucide="search" class="w-16 h-16 text-gray-300 mx-auto mb-4"></i>
                            <h3 class="text-xl font-medium mb-2">ğŸ“‚ No Cases Found</h3>
                            <p>No cases match your search criteria. Please check the spelling and try again.</p>
                        </div>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="text-center text-gray-500 py-8">
                            ğŸ“‚ No cases found. Try a different search term.
                        </div>
                    `;
                }
            } else {
                container.innerHTML = results.map(caseData => {
                    if (containerId === 'publicSearchResults') {
                        return `
                            <div class="border border-gray-200 rounded-lg p-6 hover:border-green-300 transition-colors bg-gray-50">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="space-y-3">
                                        <div class="flex items-center">
                                            <i data-lucide="hash" class="w-5 h-5 text-green-600 mr-2"></i>
                                            <span><strong>ğŸ·ï¸ Evidence ID:</strong> ${caseData.evidenceId}</span>
                                        </div>
                                        <div class="flex items-center">
                                            <i data-lucide="user-check" class="w-5 h-5 text-green-600 mr-2"></i>
                                            <span><strong>ğŸ†” Aadhaar:</strong> ${caseData.aadhaar}</span>
                                        </div>
                                        <div class="flex items-center">
                                            <i data-lucide="user" class="w-5 h-5 text-green-600 mr-2"></i>
                                            <span><strong>ğŸ‘¤ Accused:</strong> ${caseData.accusedName}</span>
                                        </div>
                                        <div class="flex items-center">
                                            <i data-lucide="map-pin" class="w-5 h-5 text-green-600 mr-2"></i>
                                            <span><strong>ğŸ“ Location:</strong> ${caseData.crimeLocation}</span>
                                        </div>
                                    </div>
                                    <div class="space-y-3">
                                        <div class="flex items-center">
                                            <i data-lucide="calendar" class="w-5 h-5 text-green-600 mr-2"></i>
                                            <span><strong>ğŸ• Crime Date:</strong> ${new Date(caseData.crimeDateTime).toLocaleString()}</span>
                                        </div>
                                        <div class="flex items-center">
                                            <i data-lucide="clock" class="w-5 h-5 text-green-600 mr-2"></i>
                                            <span><strong>ğŸ“… Registered:</strong> ${new Date(caseData.registerDateTime).toLocaleString()}</span>
                                        </div>
                                        ${caseData.judgment ? `
                                            <div class="flex items-center">
                                                <i data-lucide="scale" class="w-5 h-5 text-green-600 mr-2"></i>
                                                <span><strong>âš–ï¸ Status:</strong> Judgment Given</span>
                                            </div>
                                        ` : `
                                            <div class="flex items-center">
                                                <i data-lucide="clock" class="w-5 h-5 text-orange-600 mr-2"></i>
                                                <span><strong>â³ Status:</strong> Pending Judgment</span>
                                            </div>
                                        `}
                                        ${caseData.closingDate ? `
                                            <div class="flex items-center">
                                                <i data-lucide="check-circle" class="w-5 h-5 text-green-600 mr-2"></i>
                                                <span><strong>ğŸ“… Closed:</strong> ${new Date(caseData.closingDate).toLocaleDateString()}</span>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <p><strong>ğŸ“‹ Case Details:</strong> ${caseData.caseDetails}</p>
                                    ${caseData.judgment ? `<p class="mt-2"><strong>âš–ï¸ Court Judgment:</strong> ${caseData.judgment}</p>` : ''}
                                    ${caseData.rejudgment ? `<p class="mt-2"><strong>ğŸ”„ Re-judgment:</strong> ${caseData.rejudgment}</p>` : ''}
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <div class="flex items-center text-sm text-blue-600">
                                        <i data-lucide="check-circle-2" class="w-4 h-4 mr-2"></i>
                                        <span>âœ… Verified on Blockchain</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        const statusColor = caseData.judgment ? 'text-green-600' : 'text-orange-600';
                        const statusText = caseData.judgment ? 'âœ… Judgment Given' : 'â³ Pending Judgment';
                        
                        return `
                            <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div><strong>ğŸ·ï¸ Evidence ID:</strong> ${caseData.evidenceId}</div>
                                    <div><strong>ğŸ†” Aadhaar:</strong> ${caseData.aadhaar}</div>
                                    <div><strong>ğŸ‘¤ Accused:</strong> ${caseData.accusedName}</div>
                                    <div><strong>ğŸ“ Location:</strong> ${caseData.crimeLocation}</div>
                                    <div class="col-span-2"><strong>ğŸ“‹ Details:</strong> ${caseData.caseDetails}</div>
                                    <div class="col-span-2 ${statusColor}"><strong>Status:</strong> ${statusText}</div>
                                </div>
                            </div>
                        `;
                    }
                }).join('');
            }
            
            // Reinitialize Lucide icons for new content
            lucide.createIcons();
        }

        // ==============================
        // EVENT LISTENERS
        // ==============================

        // Police login
        document.getElementById('policeLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('policeUsername').value;
            const password = document.getElementById('policePassword').value;
            
            if (username === credentials.police.username && password === credentials.police.password) {
                hideAllPages();
                document.getElementById('policePortal').classList.remove('hidden');
                document.getElementById('evidenceId').value = generateEvidenceId();
                clearAllForms();
                // Don't clear the evidence ID after clearing forms
                document.getElementById('evidenceId').value = generateEvidenceId();
            } else {
                alert('âŒ Invalid credentials. Please try again.');
            }
        });

        // Court login
        document.getElementById('courtLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('courtUsername').value;
            const password = document.getElementById('courtPassword').value;
            
            if (username === credentials.court.username && password === credentials.court.password) {
                hideAllPages();
                document.getElementById('courtPortal').classList.remove('hidden');
                clearAllForms();
            } else {
                alert('âŒ Invalid credentials. Please try again.');
            }
        });

        // Police form submission
        document.getElementById('policeForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const aadhaar = document.getElementById('aadhaar').value;
            
            // Validate Aadhaar
            if (aadhaar.length !== 12 || !/^\d{12}$/.test(aadhaar)) {
                alert('âŒ Aadhaar number must be exactly 12 digits.');
                return;
            }

            const newCase = {
                evidenceId: document.getElementById('evidenceId').value,
                aadhaar: aadhaar,
                accusedName: document.getElementById('accusedName').value,
                caseDetails: document.getElementById('caseDetails').value,
                crimeLocation: document.getElementById('crimeLocation').value,
                crimeDateTime: document.getElementById('crimeDateTime').value,
                registerDateTime: document.getElementById('registerDateTime').value
            };

            // Submit to blockchain
            const success = await registerCaseOnBlockchain(newCase);
            if (success) {
                cases.push(newCase);
                evidenceCounter++;
                
                // Clear form and set new evidence ID
                document.getElementById('policeForm').reset();
                document.getElementById('evidenceId').value = generateEvidenceId();
            }
        });

        // Court form submission
        document.getElementById('courtForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!selectedCase) {
                alert('âŒ Please select a case first.');
                return;
            }

            const judgment = document.getElementById('judgment').value;
            const closingDate = document.getElementById('closingDate').value;
            const rejudgment = document.getElementById('rejudgment').value;

            // Submit judgment to blockchain
            const success = await submitJudgmentOnBlockchain(
                selectedCase.evidenceId,
                judgment,
                closingDate,
                rejudgment
            );

            if (success) {
                const updatedCase = {
                    ...selectedCase,
                    judgment: judgment,
                    closingDate: closingDate,
                    rejudgment: rejudgment
                };

                const index = cases.findIndex(c => c.evidenceId === selectedCase.evidenceId);
                if (index !== -1) {
                    cases[index] = updatedCase;
                }

                // Clear form
                document.getElementById('courtForm').reset();
                document.getElementById('selectedCaseInfo').classList.add('hidden');
                document.getElementById('courtSearchDropdown').classList.add('hidden');
                document.getElementById('courtSubmitBtn').disabled = true;
                selectedCase = null;
            }
        });

        // Aadhaar auto-fill functionality
        document.getElementById('aadhaar').addEventListener('input', function(e) {
            const aadhaar = e.target.value;
            const existingCase = cases.find(c => c.aadhaar === aadhaar);
            if (existingCase) {
                document.getElementById('accusedName').value = existingCase.accusedName;
            }
        });

        // Search functionality for all portals
        document.getElementById('policeSearch').addEventListener('input', function(e) {
            const results = searchCases(e.target.value);
            updateSearchResults('policeSearchResults', results);
        });

        document.getElementById('courtTrackingSearch').addEventListener('input', function(e) {
            const results = searchCases(e.target.value);
            updateSearchResults('courtTrackingResults', results);
        });

        // Court search with dropdown
        document.getElementById('courtSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value;
            const results = searchCases(searchTerm);
            const dropdown = document.getElementById('courtSearchDropdown');
            
            if (searchTerm && results.length > 0 && !selectedCase) {
                dropdown.innerHTML = results.map(caseData => `
                    <div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 search-result" onclick="selectCase('${caseData.evidenceId}')">
                        <div class="font-medium">${caseData.evidenceId} - ${caseData.accusedName}</div>
                        <div class="text-sm text-gray-600">${caseData.caseDetails.substring(0, 100)}...</div>
                    </div>
                `).join('');
                dropdown.classList.remove('hidden');
            } else {
                dropdown.classList.add('hidden');
            }
        });

        // Select case for court judgment
        function selectCase(evidenceId) {
            selectedCase = cases.find(c => c.evidenceId === evidenceId);
            if (selectedCase) {
                document.getElementById('courtSearch').value = selectedCase.evidenceId;
                document.getElementById('courtSearchDropdown').classList.add('hidden');
                
                document.getElementById('selectedCaseDetails').innerHTML = `
                    <div><strong>ğŸ·ï¸ Evidence ID:</strong> ${selectedCase.evidenceId}</div>
                    <div><strong>ğŸ‘¤ Accused:</strong> ${selectedCase.accusedName}</div>
                    <div><strong>ğŸ“‹ Details:</strong> ${selectedCase.caseDetails}</div>
                `;
                document.getElementById('selectedCaseInfo').classList.remove('hidden');
                document.getElementById('courtSubmitBtn').disabled = false;
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            showHome();
            lucide.createIcons();
            
            // Try to connect wallet on page load (optional)
            // connectWallet();
        });
    </script>
</body>
</html> give perfect solidity that matches html
